<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: Watchdog Peripheral Abstraction Layer (WDG PAL)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__wdg__pal.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Watchdog Peripheral Abstraction Layer (WDG PAL)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The S32 SDK provides a Peripheral Abstraction Layer for Watchdog (WDG PAL) modules of S32 SDK devices. </p>
<p>The Watchdog PAL driver allows to generate interrupt event to reset CPU or external circuit. It was designed to be portable across all platforms and IPs which support Watchdog Timer. </p>
<h2>How to integrate WDG PAL in your application</h2>
<p>Unlike the other drivers, WDG PAL modules need to include a configuration file named wdg_pal_cfg.h, which allows the user to specify which IPSs are used and how many resources are allocated for each of them (state structures). The following code example shows how to configure one instance for each available WDG IPs. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef WDG_PAL_CFG_H</span></div>
<div class="line"><span class="preprocessor">#define WDG_PAL_CFG_H</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define WDG_OVER_WDOG_INSTANCE_COUNT    1U</span></div>
<div class="line"><span class="preprocessor">#define WDG_OVER_EWM_INSTANCE_COUNT     1U</span></div>
<div class="line"><span class="preprocessor">#define WDG_OVER_SWT_INSTANCE_COUNT     1U</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* WDG_PAL_CFG_H */</span><span class="preprocessor"></span></div>
</div><!-- fragment --><p>The following table contains the matching between platforms and available IPs </p><table class="doxtable">
<tr>
<th align="center">IP/MCU </th><th align="center">S32K116</th><th align="center">S32K142</th><th align="center">S32K144</th><th align="center">S32K146</th><th align="center">S32K148</th><th align="center">S32MTV</th><th align="center">MPC5748G</th><th align="center">MPC5746C</th><th align="center">MPC5744P  </th></tr>
<tr>
<td align="center">WDOG </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td><td align="center">NO </td><td align="center">NO </td><td align="center">NO </td></tr>
<tr>
<td align="center">EWM </td><td align="center">NO </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td><td align="center">NO </td><td align="center">NO </td><td align="center">NO </td></tr>
<tr>
<td align="center">SWT </td><td align="center">NO </td><td align="center">NO </td><td align="center">NO </td><td align="center">NO </td><td align="center">NO </td><td align="center">NO </td><td align="center">YES </td><td align="center">YES </td><td align="center">YES </td></tr>
</table>
<h2>Functionality</h2>
<h3>Initialization</h3>
<p>In order to use the WDG PAL driver it must be first initialized, using <a class="el" href="group__wdg__pal__code.html#ga3ad07f57899232a3664189b26b50c63a" title="Initializes the WDG PAL. ">WDG_Init()</a> function. Once initialized, it cannot be initialized again for the same WDG module instance until it is de-initialized, using <a class="el" href="group__wdg__pal__code.html#gaa2e30c870fe7b4fe394a78ca2e723177" title="De-initializes the WDG PAL. ">WDG_Deinit()</a>. Different WDG modules instances can function independently of each other. </p>
<h3>Interrupt event</h3>
<p>After initialization, WDG PAL counter will count to timeout value. In window mode, when WDG PAL counter is refreshed, it will reset count to default value and count again. If WDG PAL counter count to timeout value, CPU or the external circuit will be reseted or placed into safe mode. </p>
<p>The configuration structure includes a special field named extension. It will be used only for WDG PAL over EWM peripheral and should contain a pointer to extension_ewm_for_wdg_t structure. The purpose of this structure is to configure which EWM_OUT pins and clock prescaler are used by the applications. </p>
<h2>Important Notes</h2>
<ul>
<li>Before using the WDG PAL driver the module clock must be configured. Refer to Clock Manager for clock configuration.</li>
<li>The driver enables the interrupts for the corresponding WDG PAL module, but any interrupt priority must be done by the application</li>
<li>For WDG PAL over SWT, if the counter clock is slow, the software needs a wait time (inversely proportional to counter clock frequency) to synchronization completed. </li>
</ul>
<h2>Example code</h2>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">#define INST_WDG_PAL1    WDG_OVER_WDOG_INSTANCE</span></div>
<div class="line"><span class="preprocessor">#define INST_WDG_PAL2    WDG_OVER_EWM_INSTANCE</span></div>
<div class="line"><span class="preprocessor">#define INST_WDG_PAL3    WDG_OVER_SWT_INSTANCE</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="structwdg__config__t.html">wdg_config_t</a> wdg_pal2_Config0 =</div>
<div class="line">{</div>
<div class="line">    .<a class="code" href="structwdg__config__t.html#aaaf3775bd33b0a230b25db5be37d3219">clkSource</a>       = <a class="code" href="group__wdg__pal__code.html#gga578b10d24132f3da9bad328e440b9007ae7cd38e16ddada95a30f25cf1ef5cfa5">WDG_PAL_LPO_CLOCK</a>,</div>
<div class="line">    .opMode          =</div>
<div class="line">    {</div>
<div class="line">        .wait        = <span class="keyword">false</span>,</div>
<div class="line">        .stop        = <span class="keyword">false</span>,</div>
<div class="line">        .debug       = <span class="keyword">false</span></div>
<div class="line">    },</div>
<div class="line">    .timeoutValue    = 254,</div>
<div class="line">    .percentWindow   = 100,</div>
<div class="line">    .intEnable       = <span class="keyword">true</span>,</div>
<div class="line">    .winEnable       = <span class="keyword">true</span>,</div>
<div class="line">    .prescalerEnable = <span class="keyword">true</span>,</div>
<div class="line">    .extension       = &amp;wdg_pal2_Extension0</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> extension_ewm_for_wdg_t wdg_pal2_Extension0 =</div>
<div class="line">{</div>
<div class="line">    .assertLogic     = WDG_IN_ASSERT_ON_LOGIC_ZERO,</div>
<div class="line">    .prescalerValue  = 251</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Init clocks, pins, led and other modules */</span></div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Initialize WDG PAL */</span></div>
<div class="line">    <a class="code" href="group__wdg__pal__code.html#ga3ad07f57899232a3664189b26b50c63a">WDG_Init</a>(INST_WDG_PAL2, &amp;wdg_pal2_Config0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Infinite loop*/</span></div>
<div class="line">    <span class="keywordflow">while</span>(1)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Do something until the counter needs to be refreshed */</span></div>
<div class="line">        ...</div>
<div class="line">        <span class="comment">/* Reset WDG PAL counter */</span></div>
<div class="line">        <a class="code" href="group__wdg__pal__code.html#ga09807e658d37e9b89dc767b6b96af8f8">WDG_Refresh</a>(INST_WDG_PAL2);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__wdg__pal__code"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wdg__pal__code.html">WDG PAL</a></td></tr>
<tr class="memdesc:group__wdg__pal__code"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watchdog Peripheral Abstraction Layer. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 8 2018 15:07:06 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
