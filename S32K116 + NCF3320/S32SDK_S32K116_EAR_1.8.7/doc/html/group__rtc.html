<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: Real Time Clock Driver (RTC)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__rtc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Real Time Clock Driver (RTC)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The S32 SDK provides the Peripheral Driver for the Real Time Clock (RTC) module of S32 SDK devices.<br />
. </p>
<h2>Hardware background</h2>
<p>The Real Time Clock Module is a independent timer that keeps track of the exact date and time with no software overhead, with low power usage.</p>
<p>Features of the RTC module include:</p><ul>
<li>32-bit seconds counter with roll-over protection and 32-bit alarm</li>
<li>16-bit prescaler with compensation that can correct errors between 0.12 ppm and 3906 ppm</li>
<li>Option to increment prescaler using the LPO (prescaler increments by 32 every clock edge)</li>
<li>Register write protection</li>
<li>Lock register requires POR or software reset to enable write access</li>
<li>Configurable 1, 2, 4, 8, 16, 32, 64 or 128 Hz square wave output with optional interrupt</li>
<li>Alarm interrupt configured by the driver automatically refreshes alarm time configured by the user</li>
<li>User interrupt handlers can be configured for all interrupts</li>
</ul>
<h2>How to use the RTC driver in your application</h2>
<p>In order to be able to use the RTC in your application, the first thing to do is initializing it with the desired configuration. This is done by calling the <b>RTC_DRV_Init</b> function. One of the arguments passed to this function is the configuration which will be used for the RTC instance, specified by the <b><a class="el" href="structrtc__init__config__t.html" title="RTC Initialization structure Implements : rtc_init_config_t_Class. ">rtc_init_config_t</a></b> structure.</p>
<p>The <b><a class="el" href="structrtc__init__config__t.html" title="RTC Initialization structure Implements : rtc_init_config_t_Class. ">rtc_init_config_t</a></b> structure allows you to configure the following:</p><ul>
<li>RTC clock source (32 KHz clock or 1 KHz LPO clock)</li>
<li>Clock Out pin configuration (Clock OUT pin source)</li>
<li>Compensation (Interval and value)</li>
<li>Update enable - this allows updates to Time Counter Enable bit if the Status Register under limited conditions</li>
<li>Enable non supervisor writes to the registers</li>
</ul>
<p>The <b><a class="el" href="structrtc__seconds__int__config__t.html" title="RTC Seconds Interrupt Configuration Implements : rtc_seconds_int_config_t_Class. ">rtc_seconds_int_config_t</a></b> structure configures the <b>time seconds interrupt</b>. To setup an interrupt every seconds you have to configure the structure mentioned with the following parameters:</p><ul>
<li>Frequency of the interrupt</li>
<li>Interrupt Handler</li>
<li>If needed - interrupt handler parameters</li>
</ul>
<p>An alarm is configured with <b><a class="el" href="structrtc__alarm__config__t.html" title="RTC alarm configuration Implements : rtc_alarm_config_t_Class. ">rtc_alarm_config_t</a></b> structure, which is described by the following parameters:</p><ul>
<li>Alarm time in date-time format</li>
<li>Interval of alarm repeat in seconds</li>
<li>Number of alarm repeats (use 0 if the alarm is not recursive)</li>
<li>Repeat forever field (if set, the number of repeats field will be ignored)</li>
<li>Alarm interrupt enable</li>
<li>Alarm interrupt handler</li>
<li>Alarm interrupt handler parameters</li>
</ul>
<p><b>Note</b> If the alarm interrupt is not enabled, the user must make the updates of the alarm time manually.</p>
<p>After the RTC_DRV_Init call and, if needed, alarm and other configurations the RTC counter is started by calling RTC_DRV_Enable, with start time as parameter in <b><a class="el" href="structrtc__timedate__t.html" title="RTC Time Date structure Implements : rtc_timedate_t_Class. ">rtc_timedate_t</a></b> format.</p>
<p>To get the current time and date you can call RTC_DRV_GetCurrentTimeDate function, this method will get the seconds from the Time Seconds Register and will convert into human readable format as <a class="el" href="structrtc__timedate__t.html" title="RTC Time Date structure Implements : rtc_timedate_t_Class. ">rtc_timedate_t</a>.</p>
<h3>Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> rtcAlarmCallback(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structrtc__timedate__t.html">rtc_timedate_t</a> currentTime;</div>
<div class="line">    <a class="code" href="group__rtc__driver.html#ga7dfc460e730d4e57569381135f3c4ad1">RTC_DRV_GetCurrentTimeDate</a>(0U, &amp;currentTime);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/* Do something with the time and date */</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* rtcTimer1 configuration structure */</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="structrtc__init__config__t.html">rtc_init_config_t</a> rtcTimer1_Config0 = </div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Time compensation interval */</span></div>
<div class="line">        .<a class="code" href="structrtc__init__config__t.html#a02370081b48c932b3cf4f533dec4c6c2">compensationInterval</a>       =   0U,</div>
<div class="line">        <span class="comment">/* Time compensation value */</span></div>
<div class="line">        .compensation               =   0,</div>
<div class="line">        <span class="comment">/* RTC Clock Source is 32 KHz crystal */</span></div>
<div class="line">        .clockSelect                =   <a class="code" href="group__rtc__driver.html#gga46cbda5ec374a8ae296c004d51dc39f6abcf0ffb32ddd8e7dd3b1c4eff1f697cc">RTC_CLK_SRC_OSC_32KHZ</a>, </div>
<div class="line">        <span class="comment">/* RTC Clock Out is 32 KHz clock */</span></div>
<div class="line">        .clockOutConfig             =   <a class="code" href="group__rtc__driver.html#ggac116d70b5ff61ec360052ec492deaf85ae4a7669a88c490291b5f180240bf7031">RTC_CLKOUT_SRC_32KHZ</a>,    </div>
<div class="line">        <span class="comment">/* Update of the TCE bit is not allowed */</span></div>
<div class="line">        .updateEnable               =   <span class="keyword">false</span>,</div>
<div class="line">        <span class="comment">/* Non-supervisor mode write accesses are not supported and generate </span></div>
<div class="line"><span class="comment">         * a bus error.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        .nonSupervisorAccessEnable  =   <span class="keyword">false</span></div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* RTC Initial Time and Date */</span></div>
<div class="line">    <a class="code" href="structrtc__timedate__t.html">rtc_timedate_t</a>       rtcStartTime =</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Year */</span></div>
<div class="line">        .<a class="code" href="structrtc__timedate__t.html#a57ca98d8f6d4baf0fe41c583c7dcb0d5">year</a>       =   2016U,</div>
<div class="line">        <span class="comment">/* Month */</span></div>
<div class="line">        .month      =   01U,</div>
<div class="line">        <span class="comment">/* Day */</span></div>
<div class="line">        .day        =   01U,</div>
<div class="line">        <span class="comment">/* Hour */</span></div>
<div class="line">        .hour       =   00U,</div>
<div class="line">        <span class="comment">/* Minutes */</span></div>
<div class="line">        .minutes    =   00U,</div>
<div class="line">        <span class="comment">/* Seconds */</span></div>
<div class="line">        .seconds    =   00U</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* rtcTimer1 Alarm configuration 0 */</span></div>
<div class="line">    <a class="code" href="structrtc__alarm__config__t.html">rtc_alarm_config_t</a>   alarmConfig0 = </div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Alarm Date */</span></div>
<div class="line">        .<a class="code" href="structrtc__alarm__config__t.html#a14d55061f066729a13703161c625b994">alarmTime</a>           =  </div>
<div class="line">            {</div>
<div class="line">                <span class="comment">/* Year    */</span></div>
<div class="line">                .<a class="code" href="structrtc__timedate__t.html#a57ca98d8f6d4baf0fe41c583c7dcb0d5">year</a>       =  2016U,</div>
<div class="line">                <span class="comment">/* Month   */</span></div>
<div class="line">                .month      =  01U,</div>
<div class="line">                <span class="comment">/* Day     */</span></div>
<div class="line">                .day        =  01U,</div>
<div class="line">                <span class="comment">/* Hour    */</span></div>
<div class="line">                .hour       =  00U,</div>
<div class="line">                <span class="comment">/* Minutes */</span></div>
<div class="line">                .minutes    =  00U,</div>
<div class="line">                <span class="comment">/* Seconds */</span></div>
<div class="line">                .seconds    =  03U,</div>
<div class="line">            },</div>
<div class="line">            </div>
<div class="line">        <span class="comment">/* Alarm repeat interval */</span></div>
<div class="line">        .repetitionInterval  =       3UL,</div>
<div class="line">            </div>
<div class="line">        <span class="comment">/* Number of alarm repeats */</span></div>
<div class="line">        .numberOfRepeats     =       0UL,</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Repeat alarm forever */</span></div>
<div class="line">        .repeatForever       =       <span class="keyword">true</span>,   </div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Alarm interrupt disabled */</span></div>
<div class="line">        .alarmIntEnable      =       <span class="keyword">true</span>,</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Alarm interrupt handler */</span></div>
<div class="line">        .alarmCallback       =       (<span class="keywordtype">void</span> *)rtcAlarmCallback,</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Alarm interrupt handler parameters */</span></div>
<div class="line">        .callbackParams      =       (<span class="keywordtype">void</span> *)NULL</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Call the init function */</span></div>
<div class="line">        <a class="code" href="group__rtc__driver.html#gae8b08d9d1ad4cc1021f3e6dfca957021">RTC_DRV_Init</a>(0UL, &amp;rtcInitConfig);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Set the time and date */</span></div>
<div class="line">        <a class="code" href="group__rtc__driver.html#ga9d45c1b3fa5f8921d57bf9f3b873c77b">RTC_DRV_SetTimeDate</a>(0UL, &amp;rtcStartTime);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">/* Start RTC counter */</span></div>
<div class="line">        <a class="code" href="group__rtc__driver.html#ga5ab0b19b5636f38fc1b429873f135d51">RTC_DRV_StartCounter</a>(0UL);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Configure an alarm every 3 seconds */</span></div>
<div class="line">        <a class="code" href="group__rtc__driver.html#gaca337e66aec5171d27fb593f729a0ad0">RTC_DRV_ConfigureAlarm</a>(0UL, &amp;rtcAlarmConfig0);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">while</span>(1);</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Important Notes</h3>
<ul>
<li>Before using the RTC driver the module clock must be configured</li>
<li>The driver enables the interrupts for the corresponding RTC module, but any interrupt priority must be done by the application</li>
<li>The board specific configurations must be done prior to driver calls; the driver has no influence on the functionality of the clockout pin - they must be configured by application</li>
<li>If Non-supervisor mode write accesses are supported you need to set APIS to allow usermode access to RTC Memory Space </li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__rtc__driver"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rtc__driver.html">Real Time Clock Driver</a></td></tr>
<tr class="memdesc:group__rtc__driver"><td class="mdescLeft">&#160;</td><td class="mdescRight">Real Time Clock Driver Peripheral Driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 8 2018 15:07:06 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
