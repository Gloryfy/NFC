<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S32 SDK: FlexTimer Module Counter Driver (FTM_MC)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" style="height:auto; width:100%"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <img id="projectlogo" style="height:auto; width:100%" alt="Logo" src="s32sdk_logo_small.jpg"/>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__ftm__mc__driver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FlexTimer Module Counter Driver (FTM_MC)<div class="ingroups"><a class="el" href="group__ftm.html">FlexTimer (FTM)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>FlexTimer Module Counter Peripheral Driver. </p>
<h2>Hardware background</h2>
<p>The FTM of the S32K1xx is based on a 16 bits counter and supports: input capture, output compare, PWM and some instances include quadrature decoder.</p>
<h2>How to use FTM driver in your application</h2>
<p>For all operation modes (without Quadrature Decoder mode) the user need to configure <a class="el" href="structftm__user__config__t.html" title="Configuration structure that the user needs to set. ">ftm_user_config_t</a>. This structure will be used for initialization (FTM_DRV_Init). The next functions used are specific for each operation mode.</p>
<h3>Counter mode</h3>
<p>For this mode the user needs to configure parameters like: counter mode (up-counting or up-down counting), maximum counter value, initial counter value. All this information is included in the <a class="el" href="structftm__timer__param__t.html" title="FlexTimer driver timer mode configuration structure. ">ftm_timer_param_t</a> structure.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="comment">/* The state structure of instance in the input capture mode */</span></div>
<div class="line"><a class="code" href="structftm__state__t.html">ftm_state_t</a> stateTimer;</div>
<div class="line"><span class="preprocessor">#define FTM_TIMER_INSTANCE        1UL</span></div>
<div class="line"><span class="comment">/* Timer mode configuration for Timer */</span></div>
<div class="line"><a class="code" href="structftm__timer__param__t.html">ftm_timer_param_t</a> Timer_TimerConfig =</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__ftm__common.html#ggad807c3c9d7e0ccde621aef85081ea8a8af266d8da543f0e774d2a57c898317b97">FTM_MODE_UP_TIMER</a>,              <span class="comment">/* Counter mode */</span></div>
<div class="line">    0U,                             <span class="comment">/* Initial counter value */</span></div>
<div class="line">    0x8000U                         <span class="comment">/* Final counter value */</span></div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">/* Global configuration of Timer*/</span></div>
<div class="line"><a class="code" href="structftm__user__config__t.html">ftm_user_config_t</a>  Timer_InitConfig =</div>
<div class="line">{</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">false</span>,                      <span class="comment">/* Software trigger state */</span></div>
<div class="line">        <span class="keyword">false</span>,                      <span class="comment">/* Hardware trigger 1 state */</span></div>
<div class="line">        <span class="keyword">false</span>,                      <span class="comment">/* Hardware trigger 2 state */</span></div>
<div class="line">        <span class="keyword">false</span>,                      <span class="comment">/* Hardware trigger 3 state */</span></div>
<div class="line">        <span class="keyword">false</span>,                      <span class="comment">/* Maximum loading point state */</span></div>
<div class="line">        <span class="keyword">false</span>,                      <span class="comment">/* Min loading point state */</span></div>
<div class="line">        <a class="code" href="group__ftm__common.html#gga6158d722e51c982604ab70350e950a09a5936fee435466fc46cab788c903b9183">FTM_SYSTEM_CLOCK</a>,           <span class="comment">/* Update mode for INVCTRL register */</span></div>
<div class="line">        <a class="code" href="group__ftm__common.html#gga6158d722e51c982604ab70350e950a09a5936fee435466fc46cab788c903b9183">FTM_SYSTEM_CLOCK</a>,           <span class="comment">/* Update mode for SWOCTRL register */</span></div>
<div class="line">        <a class="code" href="group__ftm__common.html#gga6158d722e51c982604ab70350e950a09a5936fee435466fc46cab788c903b9183">FTM_SYSTEM_CLOCK</a>,           <span class="comment">/* Update mode for OUTMASK register */</span></div>
<div class="line">        <a class="code" href="group__ftm__common.html#gga6158d722e51c982604ab70350e950a09a5936fee435466fc46cab788c903b9183">FTM_SYSTEM_CLOCK</a>,           <span class="comment">/* Update mode for CNTIN register */</span></div>
<div class="line">        <span class="keyword">false</span>,                      <span class="comment">/* Auto clear trigger state for hardware trigger */</span></div>
<div class="line">        <a class="code" href="group__ftm__common.html#ggac2ec54f33420e81b2fdd359cb790fda1a17bfa23688238b8316be0926442f34ee">FTM_UPDATE_NOW</a>,             <span class="comment">/* Select synchronization method */</span></div>
<div class="line">    },</div>
<div class="line">    <a class="code" href="group__ftm__common.html#ggad807c3c9d7e0ccde621aef85081ea8a8af266d8da543f0e774d2a57c898317b97">FTM_MODE_UP_TIMER</a>,              <span class="comment">/* Mode of operation for FTM */</span></div>
<div class="line">    <a class="code" href="group__ftm__common.html#gga3c3e411f333eecedb94d9e865d321bcfa13091145a70cde9362b8a479fdc1b035">FTM_CLOCK_DIVID_BY_2</a>,           <span class="comment">/* FTM clock pre-scaler */</span></div>
<div class="line">    <a class="code" href="group__ftm__common.html#ggaa06173bb43f7666ce1f39dd68fe74edca0294aefcd53cfb8c31ce2199ebf0ae81">FTM_CLOCK_SOURCE_SYSTEMCLK</a>,     <span class="comment">/* FTM clock source */</span></div>
<div class="line">    <a class="code" href="group__ftm__common.html#ggad56a34539f559be0d845c2f50b30961aa9e4da83e88d1e3f3ef3e7367abefff56">FTM_BDM_MODE_11</a>,                <span class="comment">/* FTM debug mode */</span></div>
<div class="line">    <span class="keyword">false</span>,                          <span class="comment">/* Interrupt state */</span></div>
<div class="line">    <span class="keyword">false</span>                           <span class="comment">/* Initialization trigger */</span></div>
<div class="line">};</div>
<div class="line"><a class="code" href="group__ftm__common.html#gab429cac803c9a9699ca81b36b172a0e5">FTM_DRV_Init</a>(FTM_TIMER_INSTANCE,&amp;Timer_InitConfig, &amp;stateTimer);</div>
<div class="line"><a class="code" href="group__ftm__mc__driver.html#gaa75fd439d0e7564b32adb0f4204dfeb4">FTM_DRV_InitCounter</a>(FTM_TIMER_INSTANCE, &amp;Timer_TimerConfig);</div>
<div class="line"><a class="code" href="group__ftm__mc__driver.html#ga46215c276375cabc073eb5ef80a77fbc">FTM_DRV_CounterStart</a>(FTM_TIMER_INSTANCE);</div>
</div><!-- fragment --> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structftm__timer__param__t.html">ftm_timer_param_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">FlexTimer driver timer mode configuration structure.  <a href="structftm__timer__param__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa75fd439d0e7564b32adb0f4204dfeb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ftm__mc__driver.html#gaa75fd439d0e7564b32adb0f4204dfeb4">FTM_DRV_InitCounter</a> (uint32_t instance, const <a class="el" href="structftm__timer__param__t.html">ftm_timer_param_t</a> *timer)</td></tr>
<tr class="memdesc:gaa75fd439d0e7564b32adb0f4204dfeb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the FTM counter.  <a href="#gaa75fd439d0e7564b32adb0f4204dfeb4">More...</a><br /></td></tr>
<tr class="separator:gaa75fd439d0e7564b32adb0f4204dfeb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46215c276375cabc073eb5ef80a77fbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ftm__mc__driver.html#ga46215c276375cabc073eb5ef80a77fbc">FTM_DRV_CounterStart</a> (uint32_t instance)</td></tr>
<tr class="memdesc:ga46215c276375cabc073eb5ef80a77fbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the FTM counter.  <a href="#ga46215c276375cabc073eb5ef80a77fbc">More...</a><br /></td></tr>
<tr class="separator:ga46215c276375cabc073eb5ef80a77fbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga990eb720150bb8e1e0f4adda61e5feee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ftm__mc__driver.html#ga990eb720150bb8e1e0f4adda61e5feee">FTM_DRV_CounterStop</a> (uint32_t instance)</td></tr>
<tr class="memdesc:ga990eb720150bb8e1e0f4adda61e5feee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the FTM counter.  <a href="#ga990eb720150bb8e1e0f4adda61e5feee">More...</a><br /></td></tr>
<tr class="separator:ga990eb720150bb8e1e0f4adda61e5feee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga312635cf7c0391a6c85d9ba722e93f89"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ftm__mc__driver.html#ga312635cf7c0391a6c85d9ba722e93f89">FTM_DRV_CounterRead</a> (uint32_t instance)</td></tr>
<tr class="memdesc:ga312635cf7c0391a6c85d9ba722e93f89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads back the current value of the FTM counter.  <a href="#ga312635cf7c0391a6c85d9ba722e93f89">More...</a><br /></td></tr>
<tr class="separator:ga312635cf7c0391a6c85d9ba722e93f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga312635cf7c0391a6c85d9ba722e93f89"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t FTM_DRV_CounterRead </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads back the current value of the FTM counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>The FTM peripheral instance number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current counter value </dd></dl>

<p>Definition at line <a class="el" href="ftm__mc__driver_8c_source.html#l00153">153</a> of file <a class="el" href="ftm__mc__driver_8c_source.html">ftm_mc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga46215c276375cabc073eb5ef80a77fbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a> FTM_DRV_CounterStart </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the FTM counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>The FTM peripheral instance number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>operation status<ul>
<li>STATUS_SUCCESS : Completed successfully.</li>
<li>STATUS_ERROR : Error occurred. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="ftm__mc__driver_8c_source.html#l00112">112</a> of file <a class="el" href="ftm__mc__driver_8c_source.html">ftm_mc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga990eb720150bb8e1e0f4adda61e5feee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a> FTM_DRV_CounterStop </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the FTM counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>The FTM peripheral instance number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>operation status<ul>
<li>STATUS_SUCCESS : Completed successfully. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="ftm__mc__driver_8c_source.html#l00133">133</a> of file <a class="el" href="ftm__mc__driver_8c_source.html">ftm_mc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaa75fd439d0e7564b32adb0f4204dfeb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="status_8h.html#af9bff8ff1154a04a899276af806b8586">status_t</a> FTM_DRV_InitCounter </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structftm__timer__param__t.html">ftm_timer_param_t</a> *&#160;</td>
          <td class="paramname"><em>timer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the FTM counter. </p>
<p>Starts the FTM counter. This function provides access to the FTM counter settings. The counter can be run in Up counting and Up-down counting modes. To run the counter in Free running mode, choose Up counting option and provide 0x0 for the countStartVal and 0xFFFF for countFinalVal. Please call this function only when FTM is used as timer/counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>The FTM peripheral instance number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timer</td><td>Timer configuration structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>operation status<ul>
<li>STATUS_SUCCESS : Initialized successfully. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="ftm__mc__driver_8c_source.html#l00053">53</a> of file <a class="el" href="ftm__mc__driver_8c_source.html">ftm_mc_driver.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 8 2018 15:07:05 for S32 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
